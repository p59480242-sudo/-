<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendar Appointment Bot</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600;700&display=swap');
        body { font-family: 'Sarabun', sans-serif; }
        .chat-container { height: calc(100vh - 160px); }
        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
        }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">

    <!-- Header -->
    <header class="bg-blue-600 text-white p-4 shadow-lg sticky top-0 z-50">
        <div class="max-w-2xl mx-auto flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="bg-white text-blue-600 w-10 h-10 rounded-full flex items-center justify-center shadow-inner">
                    <i class="fa-solid fa-calendar-check text-xl"></i>
                </div>
                <div>
                    <h1 class="font-bold text-lg leading-none">CaliBot</h1>
                    <p class="text-[10px] opacity-80 uppercase tracking-widest mt-1">Smart Scheduling</p>
                </div>
            </div>
            <div class="flex items-center gap-2 text-xs opacity-90 bg-blue-700 px-3 py-1 rounded-full">
                <span class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></span> Online
            </div>
        </div>
    </header>

    <!-- Chat Main Area -->
    <main class="max-w-2xl mx-auto p-4 chat-container overflow-y-auto" id="chat-window">
        <div id="messages" class="space-y-4">
            <!-- Initial Message -->
            <div class="flex justify-start">
                <div class="bg-white border border-slate-200 rounded-2xl rounded-tl-none p-4 shadow-sm max-w-[85%]">
                    <p class="text-sm">‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö! ‡∏ú‡∏°‡∏Ñ‡∏∑‡∏≠ <b>CaliBot</b> ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å‡∏Ñ‡∏£‡∏±‡∏ö</p>
                    <p class="text-sm mt-2">‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏≠‡∏∞‡πÑ‡∏£‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö? (‡πÄ‡∏ä‡πà‡∏ô ‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå, ‡∏ô‡∏±‡∏î‡∏û‡∏ö‡πÅ‡∏û‡∏ó‡∏¢‡πå, ‡∏ô‡∏±‡∏î‡∏Å‡∏¥‡∏ô‡∏Ç‡πâ‡∏≤‡∏ß)</p>
                </div>
            </div>
        </div>
    </main>

    <!-- Fixed Footer with Input -->
    <footer class="fixed bottom-0 left-0 right-0 glass-effect border-t border-slate-200 p-4 pb-6">
        <div class="max-w-2xl mx-auto">
            <div class="flex flex-wrap gap-2 mb-3 overflow-x-auto no-scrollbar pb-1">
                <button onclick="quickSelect('‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°')" class="text-[11px] bg-blue-50 text-blue-600 border border-blue-100 px-3 py-1 rounded-full whitespace-nowrap hover:bg-blue-600 hover:text-white transition-colors">‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°‡∏á‡∏≤‡∏ô</button>
                <button onclick="quickSelect('‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß')" class="text-[11px] bg-blue-50 text-blue-600 border border-blue-100 px-3 py-1 rounded-full whitespace-nowrap hover:bg-blue-600 hover:text-white transition-colors">‡∏ô‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</button>
                <button onclick="quickSelect('‡πÄ‡∏ä‡πá‡∏Ñ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ')" class="text-[11px] bg-blue-50 text-blue-600 border border-blue-100 px-3 py-1 rounded-full whitespace-nowrap hover:bg-blue-600 hover:text-white transition-colors">‡∏î‡∏π‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏á‡∏≤‡∏ô</button>
            </div>
            <div class="relative flex items-center gap-2">
                <input type="text" id="user-input" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..." 
                    class="w-full bg-slate-100 border-none rounded-2xl px-5 py-4 pr-14 text-sm focus:ring-2 focus:ring-blue-500 outline-none transition-all"
                    onkeypress="if(event.key === 'Enter') sendMessage()">
                <button onclick="sendMessage()" class="absolute right-2 p-2.5 bg-blue-600 text-white rounded-xl shadow-md hover:bg-blue-700 active:scale-95 transition-all">
                    <i class="fa-solid fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </footer>

    <script>
        const chatWindow = document.getElementById('chat-window');
        const messagesContainer = document.getElementById('messages');
        const userInput = document.getElementById('user-input');

        let step = 0; // 0: Title, 1: Date, 2: Time, 3: Confirm
        let appointmentData = { title: '', date: '', time: '' };

        function scrollToBottom() {
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }

        function addMessage(text, isUser = false) {
            const wrapper = document.createElement('div');
            wrapper.className = `flex ${isUser ? 'justify-end' : 'justify-start'} animate-in fade-in slide-in-from-bottom-2 duration-300`;
            
            const content = document.createElement('div');
            content.className = isUser 
                ? 'bg-blue-600 text-white rounded-2xl rounded-tr-none p-4 shadow-md max-w-[85%] text-sm'
                : 'bg-white border border-slate-200 rounded-2xl rounded-tl-none p-4 shadow-sm max-w-[85%] text-sm';
            
            content.innerHTML = text;
            wrapper.appendChild(content);
            messagesContainer.appendChild(wrapper);
            scrollToBottom();
        }

        function quickSelect(text) {
            userInput.value = text;
            sendMessage();
        }

        function sendMessage() {
            const text = userInput.value.trim();
            if (!text) return;

            addMessage(text, true);
            userInput.value = '';
            
            // Bot Logic Simulation
            setTimeout(() => {
                handleLogic(text);
            }, 600);
        }

        function handleLogic(input) {
            switch(step) {
                case 0:
                    appointmentData.title = input;
                    addMessage(`‡∏£‡∏±‡∏ö‡∏ó‡∏£‡∏≤‡∏ö‡∏Ñ‡∏£‡∏±‡∏ö ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö <b>"${input}"</b><br>‡∏£‡∏ö‡∏Å‡∏ß‡∏ô‡∏£‡∏∞‡∏ö‡∏∏<b>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</b>‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö (‡πÄ‡∏ä‡πà‡∏ô 20/03/2024)`);
                    step = 1;
                    break;
                case 1:
                    appointmentData.date = input;
                    addMessage(`‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ${input} ‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö... ‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∞‡πÉ‡∏´‡πâ‡∏ô‡∏±‡∏î<b>‡πÄ‡∏ß‡∏•‡∏≤</b>‡∏Å‡∏µ‡πà‡πÇ‡∏°‡∏á‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö?`);
                    step = 2;
                    break;
                case 2:
                    appointmentData.time = input;
                    const summary = `
                        <div class="border-l-4 border-blue-500 pl-3 my-2 bg-slate-50 p-2 rounded">
                            <b>üìã ‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢:</b><br>
                            üìå ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠: ${appointmentData.title}<br>
                            üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: ${appointmentData.date}<br>
                            ‚è∞ ‡πÄ‡∏ß‡∏•‡∏≤: ${appointmentData.time}
                        </div>
                        ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏±‡∏ö? (‡∏û‡∏¥‡∏°‡∏û‡πå "‡∏ï‡∏Å‡∏•‡∏á" ‡∏´‡∏£‡∏∑‡∏≠ "‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å")
                    `;
                    addMessage(summary);
                    step = 3;
                    break;
                case 3:
                    if (input.includes('‡∏ï‡∏Å‡∏•‡∏á') || input.includes('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô') || input.includes('‡πÉ‡∏ä‡πà')) {
                        addMessage(`‚úÖ <b>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!</b><br>‡∏ú‡∏°‡πÑ‡∏î‡πâ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏•‡πâ‡∏ß ‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏´‡πâ‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏µ‡∏Å‡πÑ‡∏´‡∏°‡∏Ñ‡∏£‡∏±‡∏ö?`);
                        // Reset Flow
                        step = 0;
                    } else {
                        addMessage(`‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏£‡∏Ñ‡∏£‡∏±‡∏ö ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡πÉ‡∏´‡∏°‡πà ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏≤‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö`);
                        step = 0;
                    }
                    break;
            }
        }
    </script>
</body>
</html>
